# The effects of the Iberian exception

This repository contains files to replicate the figures and tables in *Haro-Ruiz, M., Schult, C. & Wunder, C. (2023). The effects of the Iberian Exception mechanism on wholesale electricity prices and consumer inflation. A synthetic-controls approach.*

This project can be deployed in a Docker container to ensure reproducibility. You must have [Docker](https://www.docker.com/) installed in you local machine to deploy it.

Begin by cloning this repository from the command line: 

```shell
git clone https://github.com/mharoruiz/iberian_exception
cd iberian_execption
```

The next step is to build the image specefied in the `Dockerfile`. This may take up to a few minutes, as all the necessary `R` packages will be downloaded and installed in the image. Furthermore, `main.R` will be executed to replicate the figures and tables. Build the image with the following command:

```shell
docker build . -t {IMAGE-NAME}:{TAG}
```

Once the image is built, you can access the output generated by `main.R`. To do so, first run a container with the generated imgage: 

```shell 
docker run -d --name {CONTAINER-NAME} {IMAGE-NAME}:{TAG}
```

Now, coppy the directories generated by `main.R` into your local directory as follows:

```shell 
docker cp {CONTAINER-NAME}:/home/rstudio/iberian_exception/03_results $(pwd)/03_results
docker cp {CONTAINER-NAME}:/home/rstudio/iberian_exception/04_output $(pwd)/04_output
```

You will be able to access two new directories; `03_results/` contains .csv files with the estimated synthetic series (generated by `01_functions/estimate_sc.R`), as well as inference for these estimates (generated by `01_functions/inference_sc.R`); `04_outputs/` includes the resulting .png plots and tables in .csv. 